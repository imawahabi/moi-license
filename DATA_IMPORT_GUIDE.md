# دليل استيراد البيانات

## نظرة عامة

تم إضافة أداة شاملة لاستيراد بيانات الموظفين من ملفات مختلفة إلى التطبيق. هذه الأداة تسمح لك بـ:

- استيراد بيانات الموظفين من ملفات SQL أو JSON
- حفظ البيانات مباشرة في قاعدة البيانات
- عرض إحصائيات مفصلة عن الموظفين
- تصدير البيانات بتنسيقات مختلفة (JSON, TypeScript)
- معاينة البيانات المستوردة

## كيفية الوصول للأداة

1. افتح التطبيق على `http://localhost:5175`
2. انقر على زر **"استيراد البيانات"** في شريط التنقل العلوي
3. ستنتقل إلى صفحة استيراد البيانات

## خطوات الاستيراد

### 1. رفع ملف البيانات

1. انقر على منطقة الرفع أو اسحب الملف إليها
2. اختر ملف SQL (مثل `kuwait_police_licenses.sql`) أو JSON (مثل `employees.json`)
3. انتظر حتى يتم تحليل الملف

### 2. مراجعة الإحصائيات

بعد الاستيراد الناجح، ستظهر إحصائيات شاملة:

- **إجمالي الموظفين**: العدد الكلي للموظفين
- **ضباط**: عدد الموظفين من فئة "ضابط"
- **ضباط صف**: عدد الموظفين من فئة "ضابط صف"
- **مهنيين**: عدد الموظفين من فئة "مهني"
- **مدنيين**: عدد الموظفين من فئة "مدني"

### 3. حفظ في قاعدة البيانات

بعد استيراد البيانات بنجاح، يمكنك حفظها مباشرة في قاعدة البيانات:

1. انقر على زر **"حفظ جميع الموظفين في قاعدة البيانات"**
2. انتظر حتى يتم حفظ جميع البيانات
3. ستظهر رسالة تأكيد بعدد الموظفين المحفوظين

**ملاحظة**: تأكد من تشغيل الخادم قبل الحفظ، وإلا ستُحفظ البيانات في الذاكرة المؤقتة فقط.

### 4. تصدير البيانات

يمكنك تصدير البيانات بعدة طرق:

#### تحميل الملفات:
- **تحميل JSON**: ملف JSON يحتوي على جميع بيانات الموظفين
- **تحميل TypeScript**: ملف TypeScript جاهز للاستخدام في الكود

#### النسخ إلى الحافظة:
- **نسخ JSON**: نسخ البيانات بتنسيق JSON
- **نسخ TypeScript**: نسخ الكود TypeScript

### 4. معاينة البيانات

- يتم عرض أول 10 موظفين في جدول
- يمكن مراجعة الأسماء والرتب وأرقام الملفات والفئات

## استخدام البيانات المستوردة

### تحديث البيانات الوهمية

بعد تصدير البيانات كـ TypeScript:

1. انسخ الكود المُصدَّر
2. استبدل البيانات الوهمية في الملفات التالية:
   - `src/services/licenseService.ts`
   - `src/services/employeeService.ts`

### مثال على الاستخدام:

```typescript
// البيانات المُصدَّرة
const mockEmployees = [
  { id: '9', full_name: 'مشاري سامي الوهيب', rank: 'رائد حقوقي', file_number: '612154', category: 'ضابط' as const, created_at: '2025-07-16 06:19:50', updated_at: '2025-07-29 06:44:44' },
  // ... باقي الموظفين
];
```

## الميزات المتقدمة

### تصفية البيانات

يمكن استخدام الأدوات المساعدة لتصفية البيانات:

```typescript
import { SQLImporter } from '../utils/sqlImporter';

// تصفية الضباط فقط
const officers = SQLImporter.filterByCategory(employees, 'ضابط');

// الحصول على إحصائيات
const stats = SQLImporter.getEmployeeStats(employees);
```

### تنسيقات التصدير

#### JSON Format:
```json
[
  {
    "id": "9",
    "full_name": "مشاري سامي الوهيب",
    "rank": "رائد حقوقي",
    "file_number": "612154",
    "category": "ضابط",
    "created_at": "2025-07-16 06:19:50",
    "updated_at": "2025-07-29 06:44:44"
  }
]
```

#### TypeScript Format:
```typescript
const mockEmployees = [
  { id: '9', full_name: 'مشاري سامي الوهيب', rank: 'رائد حقوقي', file_number: '612154', category: 'ضابط' as const, created_at: '2025-07-16 06:19:50', updated_at: '2025-07-29 06:44:44' }
];
```

## استكشاف الأخطاء

### مشاكل شائعة:

1. **"لم يتم العثور على بيانات الموظفين في الملف"**
   - تأكد من أن الملف يحتوي على `INSERT INTO employees`
   - تحقق من تنسيق SQL

2. **"خطأ في تحليل ملف SQL"**
   - تأكد من أن الملف بتنسيق SQL صحيح
   - تحقق من وجود أخطاء في بناء الجملة

3. **"يرجى اختيار ملف SQL فقط"**
   - تأكد من أن امتداد الملف هو `.sql`

## الفوائد

### للمطورين:
- سهولة استيراد البيانات الحقيقية
- تحديث البيانات الوهمية بسرعة
- إحصائيات فورية عن البيانات

### للمستخدمين:
- واجهة سهلة الاستخدام
- معاينة فورية للبيانات
- تصدير بتنسيقات متعددة

## الخطوات التالية

1. استيراد ملف `kuwait_police_licenses.sql` الخاص بك
2. مراجعة الإحصائيات والبيانات
3. تصدير البيانات بالتنسيق المطلوب
4. تحديث البيانات الوهمية في التطبيق
5. إعادة تشغيل التطبيق للاستفادة من البيانات الجديدة

---

**ملاحظة**: هذه الأداة تعمل في الواجهة الأمامية فقط ولا تؤثر على قاعدة البيانات الفعلية. لحفظ البيانات بشكل دائم، يجب إعداد قاعدة البيانات والخادم.
